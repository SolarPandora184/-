<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TC Weed Abatement</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: black;
      color: white;
      text-align: center;
    }
    header {
      background: green;
      padding: 1rem;
    }
    main {
      padding: 2rem;
    }
    footer {
      background: #222;
      padding: 1rem;
    }
    .admin-btn {
      position: fixed;
      top: 10px;
      right: 10px;
      background: white;
      color: black;
      border: none;
      padding: 8px 12px;
      cursor: pointer;
      font-weight: bold;
    }
    .editable {
      border: 1px dashed white;
    }
  </style>
</head>
<body>

  <header>
    <h1>TC Weed Abatement</h1>
  </header>

  <main>
    <p id="aboutText">We are a professional weed abatement company serving the greater Los Angeles area with top-quality service and fast turnaround times.</p>
    <p id="servicesText">Our services include lot clearing, fire prevention, brush removal, and general landscaping maintenance to help keep your property safe and clean.</p>
    <p id="contactText">Email: Trevorcaezza@icloud.com<br>Phone: (661) 289-6054</p>
  </main>

  <footer>
    <p>&copy; 2025 TC Weed Abatement. All rights reserved.</p>
  </footer>

  <!-- Admin Panel Button -->
  <button id="adminPanel" class="admin-btn" onclick="logoutAdmin()" style="display: none;">Logout</button>
  <button id="adminLoginBtn" class="admin-btn" onclick="showAdminLogin()">Admin</button>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAk57NSoZNbGV7h5Br1-F97VU2qdCwSVb8",
      authDomain: "tc-weed-abatement.firebaseapp.com",
      projectId: "tc-weed-abatement",
      storageBucket: "tc-weed-abatement.appspot.com",
      messagingSenderId: "740378265768",
      appId: "1:740378265768:web:97ddf3a159e1268bf71a9d"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // Load saved content on page load
    document.querySelectorAll("p[id]").forEach(p => {
      const contentRef = ref(db, 'content/' + p.id);
      onValue(contentRef, snapshot => {
        if (snapshot.exists()) {
          p.innerHTML = snapshot.val();
        }
      });
    });

    // Admin Login
    window.showAdminLogin = function () {
      const password = prompt("Enter admin password:");
      if (password && password.toLowerCase() === "caprocz") {
        document.getElementById("adminPanel").style.display = "block";
        document.getElementById("adminLoginBtn").style.display = "none";
        enableEditing();
      } else {
        alert("Incorrect password.");
      }
    };

    // Admin Logout
    window.logoutAdmin = function () {
      document.getElementById("adminPanel").style.display = "none";
      document.getElementById("adminLoginBtn").style.display = "block";
      disableEditing();
    };

    // Enable editable paragraphs
    function enableEditing() {
      document.querySelectorAll("p[id]").forEach(p => {
        p.contentEditable = true;
        p.classList.add("editable");
        p.addEventListener("blur", () => {
          const contentRef = ref(db, 'content/' + p.id);
          set(contentRef, p.innerHTML.trim());
        });
      });
    }

    // Disable editable paragraphs
    function disableEditing() {
      document.querySelectorAll("p[id]").forEach(p => {
        p.contentEditable = false;
        p.classList.remove("editable");
      });
    }
  </script>
</body>
</html>
